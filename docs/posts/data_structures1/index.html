<!DOCTYPE html><html lang="en-US"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link type="text/css" href="/blog/css/styles.css" rel="stylesheet"/><link rel="stylesheet" href="/blog/css/github.min.css"/><link href="/blog/css/prism-one-light.css" rel="stylesheet"/><link rel="stylesheet" href="https://unpkg.com/katex@latest/dist/katex.min.css"/><link href="https://fonts.googleapis.com/css?family=Nunito:400,700&amp;display=swap" rel="stylesheet"/></head><body class="w-full"><ul class="flex border-b mt-2 fixed-top mx-2"><a class="bg-white inline-block border-l border-t border-r rounded-t py-4 px-4 text-black font-semibold active_text-orange" id="home_tab" href="/blog/">Home</a><a class="bg-white inline-block border-l border-t border-r rounded-t py-4 px-4 text-black font-semibold active_text-orange" id="about_tab" href="/blog/about">About</a><div class="mt-0 ml-auto relative box-border mb-4 w-5/12"><input class="bg-white border-l rounded border appearance-none leading-normal pl-4 pr-8 w-full h-full outline-none my-2" id="search_box" placeholder="Search..." type="search" name="search"/><button class="fa fa-search absolute right-0 top-2 h-full my-2 mr-6" aria-hidden="true" style="align-middle"></button></div></ul><div class="mx-2 flex border mb-6 border-t-0"><div class="markdown container px-16 items-center w-full max-w-screen-xl mx-auto prose prose-pre_p-2 prose-pre_border-2"><h1 class="my-4">Knowing your data structures: Part I</h1><small class="text-orange my-0">Author: </small><small class="text-gray my-0">Matt Piekenbrock</small><br/><small class="text-orange my-0">Date:</small><small class="text-gray my-0"> 2022-07-03</small><div class="w-full" id="page_content"> </div><p>A question that occurs enough in my life for me to document my answer in a blog post: <em>what are the major data structures everyone should know?</em></p>
<p>The question is clearly ill-posed from the start. Fundamentally, the use/non-use of any particular data structure completely depends on what <em>specific problem</em> is being solved. Data structures are a means of organizing memory and controlling complexity: without reference to a particular computational problem, the question presumes there is some irrefutable 'master list' containing some set of <em>de facto standard</em> data structures one should know. <strong>There is none.</strong></p>
<blockquote>
<p>The battle for a fast system can be won or lost in specifying the problem it is to solve.</p>
<ul>
<li>Jon Bentley, Programming Pearls</li>
</ul>
</blockquote>
<p>Nonetheless, there are some data structures and ways of using them that I have found to be particularly useful in solving problems in my own life. Towards encouraging myself to write more of these posts, I'll keep the explanations of these data structures succinct. There are already a plethora of sources online explaining them more in detail. And since this is part I, I'll start by talking about a category of data structures that everyone should use <em>every single day</em>...</p>
<h1>Arrays</h1>
<p>An <em>array</em> is a sequence container that organizes <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> homogeneous elements within a contiguous block of memory that supports randomized (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>) access to its elements. Contiguity and homogeneity are necessary conditions for randomized access: homogeneity guarantees the size of each element is fixed and contiguity guarantees the elements can be indexed in constant-time using <a href="https://en.wikipedia.org/wiki/Offset_(computer_science)">offsets</a>. If someone makes references to an &quot;array&quot; data structure that does not support these two properties, that's fine---but whatever data structure they're referring to is not the one defined here.</p>
<p>There are many types of arrays, of which the following are worth discussing in detail:</p>
<ol>
<li>Dynamic size arrays</li>
<li>Fixed-size arrays</li>
<li>Bit arrays</li>
<li>Matrices</li>
</ol>
<h2>Dynamic size arrays</h2>
<p>A <em>dynamic array</em> is an <em>array</em> that also supports insertion and deletion of elements. Necessarily, these operations may change the array's size. Typically, <a href="https://en.wikipedia.org/wiki/Append">appending</a> to the end of an array takes <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> <a href="https://en.wikipedia.org/wiki/Amortized_analysis">amortized time</a>---the worst-case complexity is always <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> to ensure the contiguity property is met.</p>
<p>Suppose you have a <a href="https://en.wikipedia.org/wiki/Arity">0-arity</a> function <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> generating data dynamically---perhaps a <a href="https://en.wikipedia.org/wiki/Closure_(computer_programming)">closure</a>---whose output type <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> you know. Suppose further you know that you know <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> is <em>valid</em> if and only if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f()</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mclose">)</span></span></span></span> is positive; otherwise <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f() = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> signals that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> is no longer generating data. This is actually a simple though sub-optimal way to implement the <a href="https://en.wikipedia.org/wiki/Iterator_pattern">iterator pattern</a>.</p>
<p>How can one efficiently store data streaming in through <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span>?</p>
<p>Because you know the type <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>, dynamic arrays are a good choice. The prototypical <a href="https://en.wikipedia.org/wiki/Standard_Template_Library">STL</a>-container for representing dynamic arrays is the <code>std::vector</code> class. Suppose <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>=</mo><mtext>int</mtext></mrow><annotation encoding="application/x-tex">T = \text{int}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66786em;vertical-align:0em;"></span><span class="mord text"><span class="mord">int</span></span></span></span></span> for simplicity.</p>
<pre class="language-cpp"><code class="language-cpp"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token keyword">auto</span> v <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span> <span class="token keyword">int</span> <span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// empty vector; observe v knows its element type</span><br><span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>  v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// amortized O(1) appending</span><br><span class="token punctuation">}</span></code></pre>
<p>Here in the line <code>while(x = f())</code> I'm abusing the fact that assignments are valid expressions in conditionals and that integers <a href="https://en.wikipedia.org/wiki/Type_conversion">implicity type cast</a> to booleans that happen match the condition of the problem. This is sometimes an <a href="https://en.wikipedia.org/wiki/Anti-pattern">anti-pattern</a>, but I think it's fine (see also <a href="https://en.wikipedia.org/wiki/Yoda_conditions">Yoda conditions</a>).</p>
<p>What's happening here under the hood? Assuming <code>v</code> is initialized to an empty vector (<a href="https://stackoverflow.com/questions/12271017/initial-capacity-of-vector-in-c">not reality</a>), the first call to <code>push_back()</code> will do the following:</p>
<ul>
<li>Copy <code>v</code>'s contents, if any, to a buffer</li>
<li><a href="https://en.cppreference.com/w/c/memory/free">Free</a> the memory held by <code>v</code></li>
<li>Re-allocate a new contiguous block of memory <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> of size <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>n</mi><mo>∗</mo><mrow><mi mathvariant="normal">s</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">z</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">f</mi></mrow><mo stretchy="false">(</mo><mtext>int</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">2n*\mathrm{sizeof}(\text{int})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">s</span><span class="mord mathrm">i</span><span class="mord mathrm">z</span><span class="mord mathrm">e</span><span class="mord mathrm">o</span><span class="mord mathrm" style="margin-right:0.07778em;">f</span></span><span class="mopen">(</span><span class="mord text"><span class="mord">int</span></span><span class="mclose">)</span></span></span></span></li>
<li>Copy the contents from the buffer to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>
This entire process happens whenever the <a href="https://en.cppreference.com/w/cpp/container/vector/capacity">capacity</a> exceeds some power of two, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup><mo separator="true">,</mo><msup><mn>2</mn><mn>1</mn></msup><mo separator="true">,</mo><msup><mn>2</mn><mn>2</mn></msup><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">2^0, 2^1, 2^2, \dots, 2^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>. Assuming <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> returns <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> valid values, up to at most <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">⌈</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">⌉</mo></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{\lceil \log(N)/\log(2)) \rceil} -1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9713299999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">⌈</span><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mclose mtight">)</span><span class="mord mtight">/</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mclose mtight">)</span><span class="mclose mtight">)</span><span class="mclose mtight">⌉</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> times. All other insertions to the end take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>. Thus, the number of insertions which take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> time increases exponentially, making the number <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> re-allocations exceedingly rare as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">n \to \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span>. This is what is meant by <em>amortized time</em>.</li>
</ul>
<p>Strictly speaking, re-allocations need not <em>always</em> be performed when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> exceeds powers of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>. In general, if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> is the worst-case running time for a sequence of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> computations, then the amortized time for each operation is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">T(n)/n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathnormal">n</span></span></span></span>, thus an operation runs in <em>amortized</em> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> if the operation has <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> complexity. Since vector-reallocation takes worst-case <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>, a sequence of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> <em>append</em> operations to an array of size <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> each has complexity <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mi>θ</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mi>θ</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(n \theta(1) + T(n))/(n + 1) = \theta(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>. In the array insertion case, as long as the frequency with which the allocator chooses to perform the re-allocation is inversely proportional to a superpolynomial, then one can say the insertion operation is amortized constant.</p>
<p>What is the correct dynamic-array data structure in Python? Well, of course, it's defined by the <a href="https://docs.python.org/3/library/array.html">array module</a>:</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">from</span> array <span class="token keyword">import</span> array<br>a <span class="token operator">=</span> array<span class="token punctuation">(</span><span class="token string">'I'</span><span class="token punctuation">)</span> <span class="token comment"># an array *must* know its element type</span><br>f <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span> <span class="token comment"># creates an iterable - using O(1) memory!</span><br>a<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token comment"># sequence of appends taking amortized O(1) time</span></code></pre>
<h2>Fixed-sized array</h2>
<p>A <em>fixed-size array</em> is an <em>array</em> whose size is known ahead of time, in some sense. In C++, this means that an array's size must be specified <em>at compile time</em>. The canonical STL-container for a fixed-size array is the <a href="https://en.cppreference.com/w/cpp/container/array">std::array</a>.</p>
<pre class="language-cpp"><code class="language-cpp"><span class="token keyword">auto</span> a <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">array</span><span class="token generic class-name"><span class="token operator">&lt;</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">15</span> <span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// must know its type *and* size</span></code></pre>
<p>Observe both the type (<em>int</em>) and size (<em>15</em>) are supplied at compile-time via the type's <a href="https://en.cppreference.com/w/cpp/language/template_parameters">template parameters</a>. Indeed, this matches the definition of a fixed-size array given above as the type itself includes the size information.</p>
<p>Fixed-sized arrays have advantages in C++ as they are typically stored <a href="https://www.learncpp.com/cpp-tutorial/the-stack-and-the-heap/">on the stack</a> or in global program memory, which <a href="https://publicwork.wordpress.com/2019/06/27/stack-allocation-vs-heap-allocation-performance-benchmark/">can be much faster to access than the heap</a>. This is not strictly true, however, because <a href="https://man7.org/linux/man-pages/man3/alloca.3.html">alloca exists</a> and can be used to create &quot;stack-allocated dynamic arrays.&quot; Nonetheless, if an array's size is known at compile-time, a fixed-size array should be used.</p>
<p>Python, to my knowledge, does not have a fixed-size array implementation. The canonical fixed-size array data structure most people use is the <a href="https://numpy.org/doc/stable/reference/arrays.html">numpy array</a>.</p>
<pre class="language-python"><code class="language-python">a <span class="token operator">=</span> np<span class="token punctuation">.</span>empty<span class="token punctuation">(</span>shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token comment"># a fixed-size array knows it's size and it's type</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment"># junk: a = array([4607182418800017408, 4613374868287651840])</span><br>a<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token comment"># This takes O(1) time</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># this throws</span><br><span class="token comment"># > IndexError: index 2 is out of bounds for axis 0 with size 2</span><br><br>b <span class="token operator">=</span> np<span class="token punctuation">.</span>append<span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment"># a is fixed, so a copy must occur!</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment"># [1,2]</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment"># [1,2,3]</span></code></pre>
<p>One might be tempted in thinking that numpy arrays are dynamic because of <code>np.append</code>/<code>np.insert</code>, but this is not true--numpy arrays, as shown above, must perform a copy at some level of memory because they are fixed size.</p>
<p>One might also be tempted in thinking that numpy arrays are type-agnostic because they support things like <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.void">void</a> and <a href="https://numpy.org/doc/stable/glossary.html#term-object-array">object</a> types; this is a facade. The generic types are just placeholders or typecast-compatible parent types of types whose size (or size-bound) <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.flexible">still must be known at instantation</a>. Numpy arrays are true arrays: they <a href="https://numpy.org/doc/stable/glossary.html#term-homogeneous">are homogeneous</a> and they <a href="https://numpy.org/doc/stable/reference/arrays.dtypes.html">know their (d)type</a>.</p>
<h2>Bit arrays</h2>
<p>On the surface, a <em>bit array</em> seems like it's just an <em>array</em> whose element type is a <a href="https://en.wikipedia.org/wiki/Bit">bit</a>. This is mostly true, but there are some serious subtleties in how one should use and think about bit arrays.</p>
<p>We typically think of our standard types (int, float, double) as being close to the <a href="https://en.wikipedia.org/wiki/Word_(computer_architecture)">word</a> size---either 32-bits or 64-bits. In theory, this means that the processor ought to be able to do simple arithmetic operations (e.g. addition) and memory operations (e.g. loading a variable into a register) with these types using <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span>-cycles, where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span> is some very small constant. This is not entirely true, of course---to say anything concrete requires knowledge of the <a href="https://en.wikipedia.org/wiki/Computer_architecture">computer architecture</a>, whether the instruction set is <a href="https://en.wikipedia.org/wiki/Complex_instruction_set_computer">CISC</a> or <a href="https://en.wikipedia.org/wiki/Reduced_instruction_set_computer">RISC</a>, etc. Nonetheless, it seems intuitive that word-size types could perhaps be manipulated using word-size instructions each with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≈</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\approx 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.48312em;vertical-align:0em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> cycle. It is tempting to conflate asymptotic statements about array operations (like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> randomized access) with the notion of an <a href="https://en.wikipedia.org/wiki/Instruction_cycle">instruction cycle</a>.</p>
<p>Since each element is much smaller than the word-size, much of this intuition simply does not translate. Statements about an array's complexity no longer hold much meaning; we must talk about what is happening at the memory level. For example, although a bit array is potentially a very compact representation from the storage perspective, any and all manipulation of individual bits at the hardware level must be performed via [usually several] <a href="https://en.wikipedia.org/wiki/Bitwise_operation">bitwise operations</a>. Sometimes these operations are efficient and sometimes they are not, leading many to question the utility of such a data structure. Indeed, This has been <a href="https://howardhinnant.github.io/onvectorbool.html">a constant point of contention</a> in the evolution of data structures in C++ used to represent arrays of bits. In fact, some would say that C/C++ <a href="http://www.mathcs.emory.edu/~cheung/Courses/255/Syllabus/1-C-intro/bit-array.html">does not provide support for an array of bits</a> but rather provides <em>all the necessary operations</em> (also see <a href="http://graphics.stanford.edu/~seander/bithacks.html">bit hacks</a>) to allow the developer to implement an array of bits.
Naturally, this has lead to many bit array representations in the STL, such as the <a href="https://cplusplus.com/reference/bitset/bitset/">bit array</a>, <a href="https://en.cppreference.com/w/cpp/container/vector_bool">std::vector<bool></a>, and <a href="https://en.cppreference.com/w/cpp/language/bit_field">bit fields</a>.</p>
<p>Python provides <a href="https://peps.python.org/pep-0225/">bitwise operations natively via PEP 225</a> and there's a decent <a href="https://pypi.org/project/bitarray/">bitarray package</a>.</p>
<h2>Matrices</h2>
<p>A <em>dense matrix</em> is a generalization of a fixed-size <em>array</em> whose size is recorded by two numbers, instead of one. More generally, a <em><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span>-dimensional array</em> is a fixed-size array whose size is recorded by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> numbers. These are sometimes called <a href="https://en.wikipedia.org/wiki/Array_data_type#Multi-dimensional_arrays">multi-dimensional arrays</a> and should not be confused with <a href="https://en.wikipedia.org/wiki/Jagged_array">jagged arrays</a>. Matrices are still memory-contiguous and type-homogenous. Instead of elements being indexed by offsets, they are indexed by <a href="https://en.wikipedia.org/wiki/Stride_of_an_array">strides</a> (the multi-dimensional generalization of an offset).</p>
<p>There are many concepts that are useful to know about a particular matrix implementation. For example, since arrays store memory contiguously, should memory be stored in <a href="https://en.wikipedia.org/wiki/Row-_and_column-major_order">column or row-major order</a>? C/C++'s 'native' multi-dimensional array is row-major. For various performance reasons, many popular linear algebra libraries in C++ use column-major order (e.g. <a href="https://eigen.tuxfamily.org/dox/group__TopicStorageOrders.html">Eigen</a> and <a href="http://arma.sourceforge.net/docs.html">Armadillo</a>) (as does <a href="https://www.mathworks.com/help/coder/ug/what-are-column-major-and-row-major-representation-1.html">MATLAB and Fortran</a>). In Python, the canonical matrix implementation is with NumPy, but by default uses row-major ordering.</p>
<h2>Conclusion + things worth thinking about</h2>
<p>Arrays are not just the simplest data structures, they are also the most performant ones in many situations. An array is <em>the most compact and most cache-friendly data structure that there is</em>. It should be one's <strong>first choice</strong> to use when the situation allows. This may sound obvious to anyone who has worked with a compiled language, yet there exist many random <a href="https://betterprogramming.pub/stop-using-lists-for-everything-in-python-46fad15217f4">internet articles abound</a> recommending the average Python programmer 'branch out' by using other non-array data structures like <em>sets</em> and <em>dictionaries</em>. I often see this with my own students, many of who will use lists because they don't even know the array module exists.</p>
<p>In closing, here is something worth trying/thinking about. <em>Sparse matrices</em> are defined as matrices
whose storage complexity is proportional to the number of non-zero entries it contains. Suppose you wanted to build a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>×</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(n \times n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> <a href="https://en.wikipedia.org/wiki/Sparse_matrix">sparse matrix</a> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> from a <a href="https://peps.python.org/pep-0255/">generator</a> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> whose size is unknown and which on evaluation yields a 3-tuple of the form <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i,j,x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>, where:</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> are unsigned integers (each <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">&lt;n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>) specifing the a position of a non-zero value in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> is the non-zero value (say, a float) to go in position <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo stretchy="false">[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">M[i,j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span></li>
</ul>
<p>How would you go about constructing such a data structure efficiently? How are sparse matrices represented in memory in the first place?</p>
<p>Hint: consider the 'coordinate' format of a sparse matrix used by <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.coo_array.html#scipy.sparse.coo_array">SciPy</a>:</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">from</span> scipy<span class="token punctuation">.</span>sparse <span class="token keyword">import</span> coo_array<br>f <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment"># some iterable returning triplets</span><br>n <span class="token operator">=</span> <span class="token number">100</span><br>I<span class="token punctuation">,</span> J<span class="token punctuation">,</span> X <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>x<span class="token punctuation">)</span> <span class="token keyword">in</span> f<span class="token punctuation">:</span><br>  I<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span><br>  J<span class="token punctuation">.</span>append<span class="token punctuation">(</span>j<span class="token punctuation">)</span><br>  X<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">)</span><br>M <span class="token operator">=</span> coo_array<span class="token punctuation">(</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> <span class="token punctuation">(</span>I<span class="token punctuation">,</span> J<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> shape<span class="token operator">=</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p>Do you see anything inherently inefficient with this method of matrix creation?</p>
<br/></div></div><script src="/blog/js/jquery.min.js"></script><script src="/blog/js/elasticlunr.min.js"></script><script src="/blog/js/lodash.min.js"></script><script>document.addEventListener('DOMContentLoaded', (event) => {
  document.querySelectorAll('pre code').forEach((block) => {
    console.log("here");
    //hljs.highlightBlock(block);
  });
});</script><script>//- Reset zoom
var scale = 'scale(1)';
document.body.style.webkitTransform = scale;   
document.body.style.msTransform = scale;
document.body.style.transform = scale;</script><script>const tabs = ["home_tab", "about_tab"];
tabs.forEach((tab_id) => {
	var tab_el = document.getElementById(tab_id)
	console.log(window.location.pathname.replace("/", ""))
	console.log(tab_el.pathname.replace("/", ""))
	if (window.location.pathname == tab_el.pathname){
		console.log("orange")
		tab_el.classList.remove("text-black")
		tab_el.classList.add("text-orange")
	} else {
		console.log("black")
		tab_el.classList.remove("text-orange")
		tab_el.classList.add("text-black")
	}
})</script><script>var search_index, doc_keys;

const apply_slugs = (slugs, display_status) => {
	_.forEach(slugs, (id) => { if (id){ $("#"+id).css("display", display_status); } });
};

$.getJSON('/blog/data/cached_index.json', function(data) {
	search_index = elasticlunr.Index.load(data);
	doc_keys = _.map(search_index.documentStore.docs, (doc) => {
		return (doc.slug ? doc.slug : "");
	});
	console.log("Search index")
	console.log(search_index);
});


const feed = $("#article_feed");
const all_articles = $("#article_feed").children();
//- const article_ids = _.map(all_articles, (article) => { 
//- 	return article.id.replace(/-/g, "_")
//- })	

console.log("Articles: ")
console.log(all_articles)

function update_search_box() {
	var searchstring = $('#search_box');
	searchstring.focus();
	
	console.log(searchstring.val())

	// If query empty, default to listing all the articles
	if (searchstring.val().trim() == ""){
		if (feed.children().length != all_articles.length){
			feed.children().detach()
			feed.append(all_articles);
		}
	} else {
		var res = search_index.search(searchstring.val(), {});
		const found_slugs = _.map(res, (doc) => { return doc.ref; });
		console.log(found_slugs)
		const ordered_articles = _.map(found_slugs, (slug) => {
			return _.find(all_articles, (article) => { return article.id.replace(/-/g, "_") == slug.replace(/-/g, "_") });
		});
		feed.children().detach()
		_.forEach(ordered_articles, (arr) => {
			feed.append(arr);
			feed.append(document.createElement("br"))
		});
	}
}
$( "#search_box" ).keyup(update_search_box);</script></body><footer class="fixed text-center bottom-0 bg-gray-100 border w-full"><span>&copy; Copyright Matt Piekenbrock 2022. Proudly powered by </span><a href="https://www.11ty.dev/">Eleventy.</a><script>$(document).ready(function() {
  $("[data-link]").click(function() {
    window.location.href = $(this).attr("data-link");
    return false;
  });
});</script></footer></html>